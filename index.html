<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tur Axtarışı</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h3>✈️ Tur Axtarışı</h3>

<label>Region:</label>
<select id="region">
    <option value="Antalya">Antalya</option>
    <option value="Istanbul">Istanbul</option>
    <option value="Dubay">Dubay</option>
    <option value="Misir">Misir</option>
</select>

<label>Otel Ulduzu:</label>
<select id="stars">
    <option value="all">Hamısı</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>

<label>Tarix:</label>
<input type="date" id="date">

<label>Gecə sayı:</label>
<input type="number" id="nights" value="6" min="1">

<label>Böyük sayı:</label>
<input type="number" id="adults" value="2" min="1">

<label>Uşaq sayı:</label>
<input type="number" id="children" value="0" min="0" onchange="toggleAgeInputs()">

<div id="children_ages"></div>

<button onclick="sendData()">Axtar</button>

<script>
let tg = window.Telegram.WebApp;
tg.expand();

document.getElementById('date').valueAsDate = new Date();

function toggleAgeInputs() {
    let count = parseInt(document.getElementById('children').value);
    let container = document.getElementById('children_ages');
    container.innerHTML = "";

    for (let i = 0; i < count; i++) {
        let input = document.createElement("input");
        input.type = "number";
        input.placeholder = "Uşağın yaşı";
        input.className = "child-age";
        input.value = "6";
        container.appendChild(input);
    }
}

function sendData() {
    let ages = [];
    document.querySelectorAll(".child-age").forEach(el => {
        ages.push(parseInt(el.value));
    });

    let data = {
        region: document.getElementById('region').value,
        stars: document.getElementById('stars').value,
        date: document.getElementById('date').value,
        nights: parseInt(document.getElementById('nights').value),
        adults: parseInt(document.getElementById('adults').value),
        children: parseInt(document.getElementById('children').value),
        ages: ages
    };

    tg.sendData(JSON.stringify(data));
}
</script>

</body>
</html>
